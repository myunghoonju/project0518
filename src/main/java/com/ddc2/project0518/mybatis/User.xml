<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ddc2.project0518.mybatis.User">


 <select id="signin"  parameterType="com.ddc2.project0518.model.UserRegister" resultType="com.ddc2.project0518.model.UserRegister">
        select * from prod_user where userid = #{userid} and password = #{password}
 </select>

<update id="keepSignin" parameterType="hashMap">
        update prod_user set sessionkey = #{sessionid}, sessionlimit = #{sessionlimit} where userid=#{userid}
 </update>

<!-- 유효기간이 남아 있으면서 해당 sessionId를 가지는 사용자 정보를 꺼내오는 부분 -->
<select id="checkUserWithSessionKey" parameterType="String" resultType="com.ddc2.project0518.model.UserRegister">
		<![CDATA[
     	select * from prod_user where sessionkey = #{sessionid} and sessionlimit > now()
     	]]>
</select>

<insert id="insertUser" parameterType="com.ddc2.project0518.model.UserRegister">
	insert into prod_user (userid, password, name, email,auth,register_date)
	values(#{userid},#{password},#{name},#{email},#{auth},sysdate())
</insert>




</mapper>